@model List<Employee>
@{
    ViewBag.Title = "List Employees";
}
        <h2>Employees</h2>
        <br />
        @Html.ActionLink("Add Employee","Add","Employees",null , new {@class = "btn btn-primary" })
        @if(Model != null && Model.Count >0)
        {
        <table class="table table-hover table-striped">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Salary</th>
                    <th>Address</th>
                </tr>
            </thead>
            <tbody>
                @foreach(Employee emp in Model)
                {
                    <tr>
                        <td>@emp.Name</td>
                        <td>@emp.Email</td>
                        <td>@emp.Salary</td>
                        <td>@emp.Address</td>
                        <td>
                            @Html.ActionLink("Details", "Details", new { id = emp.Id }, new { @class = "btn-link" }) |
                            @Html.ActionLink("Edit", "Edit", new { id = emp.Id }, new { @class = "btn-link" }) |
                            <button class="btn btn-danger" onclick="confirmDelete(@emp)">Delete</button>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
        }
@section scripts{
    <script>
        function confirmDelete(id) {
            console.log(id);
            let res = confirm("Are you sure?");
            if (res) {
                $.ajax({
                    url: `Employee/Delete/${id}`,
                    type: "POST",
                    success: function (response) {
                        if (response) {
                            let tr = $(`#${id}`);
                            tr.remove();
                        }
                    },
                    error: function (xhr, status, err) {
                        console.log(err);
                    }
                })
            }
        }
    </script>
} 